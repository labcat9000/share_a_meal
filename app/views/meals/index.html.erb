<div class="spacer-top"></div>

<div class="view-toggle">
  <button class="toggle-button active" id="list-view-btn">List</button>
  <button class="toggle-button" id="map-view-btn">Map</button>
</div>

<div id="meal-list">
  <div class="meal-cards">
    <% @meals.each do |meal| %>
      <%= link_to meal_path(meal), class: "meal-card-link" do %>
        <div class="meal-card">
          <div class="meal-card-inner">
            <div class="meal-card-image">
              <% if meal.respond_to?(:image_url) && meal.image_url.present? %>
                <%= image_tag meal.image_url, alt: meal.name, class: "meal-image" %>
              <% else %>
                <div class="meal-image-placeholder">No photo yet</div>
              <% end %>
            </div>

            <div class="meal-card-content">
              <h3 class="meal-title"><%= meal.name %></h3>
              <p class="meal-author">
                Cooked by:
                <strong><%= "#{meal.user.first_name} #{meal.user.last_name}" if meal.user %></strong>
              </p>
              <p class="meal-cuisine"><strong>Cuisine:</strong> <%= meal.cuisine %></p>
              <p class="meal-description"><%= truncate(meal.description, length: 80) %></p>
            </div>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>

<div id="meal-map" style="display: none;">
  <div class="map-wrapper">
    <div id="map" class="map-container" style="height: 60vh; border-radius: 12px;"></div>
  </div>

  <div class="map-footer">
    <div class="map-location">
      <p><strong>Montreal, QC</strong><br><small>Location is approximate</small></p>
    </div>
    <div class="map-buttons">
      <button id="locate-btn" class="map-btn">üìç Locate</button>
      <button id="directions-btn" class="map-btn">üß≠ Directions</button>
    </div>
  </div>
</div>

<div class="spacer-bottom"></div>
